<div class="row">
  <div class="col-md-12">
    <div class="property-show">
      <h2 class="title"> <i class="fa fa-home"></i> Cod. <%= @property.id %> - <%= 'Venda' if @property.sale %> <%= '/' if  @property.sale && @property.rent %> <%= 'Aluguel' if @property.rent %></h2>
      <div class="slider-wrapper">
        <div class="slider-for">
          <% @property.photos.reverse.each do |photo| %>
            <div class="image">
              <%= cl_image_tag photo.path, height: 400, crop: :fill %>
            </div>
          <% end  %>
        </div>
        <div class="slider-nav">
          <% @property.photos.reverse.each do |photo| %>
            <div>
              <%= cl_image_tag photo.path, width: 220, height: 100, crop: :fill %>
            </div>
          <% end  %>
        </div>
      </div>
      <div class="info-card">
        <p>Informações Basicas</p>
        <ul>
          <li>Tipo de Propriedade:<%= @property.bussiness_type  %></li>
          <li>Tipo: <%= @property.property_type %></li>
          <li>Estado da Propriedade: <%= @property.condition  %></li>
          <li>Posição da Propriedade: <%= @property.position  %></li>
          <li>Estilo de contrução<%= @property.style  %></li>
          <li>Ano de Contrução: <%= @property.construction_year  %></li>
          <li>Nº de Quartos: <%= @property.rooms  %></li>
          <li>Nº de Banheiros: <%= @property.bathrooms  %></li>
          <li>Nº de Suites: <%= @property.suites  %></li>
          <li>Nº de Garages<%= @property.garages  %></li>
          <li>Descrição<%= @property.description  %></li>
          <li>Condições de Venda<%= @property.sell_conditions %></li>
          <li>Garantias de Aluguel<%= @property.rent_guarantee %></li>
          <li>Observações<%= @property.observations %></li>
        </ul>
      </div>

      <div class="info-card">
        <div id="map" style="height:300px;"></div>
      </div>

      <div class="info-card">
        <p>Endereço</p>
        <ul>
          <li>CEP: <%= @address.cep %></li>
          <li>Pais: <%= @address.country %></li>
          <li>Estado: <%= @address.state %></li>
          <li>Cidade: <%= @address.city %></li>
          <li>Bairro: <%= @address.neighborhood %></li>
          <li>Largadouro: <%= @address.street %>, <%= @address.number  %></li>
          <li>Complemento: <%= @address.complement %></li>
          <li>Condominio: <%= @address.condo_name %></li>
        </ul>
      </div>

      <div class="info-card">
        <p>Area</p>
        <ul>
          <li>Area Total: <%= "#{@area.total} #{@area.scale}" %></li>
          <li>Area Util: <%= "#{@area.usable} #{@area.scale}" %></li>
          <li>Area do Terreno: <%= "#{@area.total} #{@area.scale}" %></li>
        </ul>
      </div>

      <div class="info-card">
        <p>Valor</p>
        <ul>
          <li>Valor Total: <%= "R$#{@value.sell}" %></li>
          <li>Iptu: <%= "R$#{@value.iptu}" %></li>
          <li>Condominio: <%= "R$#{@value.condominium}" %></li>
          <li>Porcetagem: <%=  %></li>
        </ul>
      </div>

      <div class="info-card">
        <p>Publicar</p>
        <%= form_tag(admin_property_path(@property), method: "patch") do %>
          <%= hidden_field_tag 'property[published]', false  %>
          <%= check_box_tag 'property[published]', @property.published , onchange: 'this.form.submit();' %>
        <% end %>
      </div>

      <%= link_to "Deletar", admin_property_path(@property), data: {confirm: 'Tem certeza que quer deletar a propriedade?'}, class: "btn btn-danger", method: :delete  %>
      <%= link_to "Editar", edit_admin_property_path(@property), class: "btn btn-primary" %>

    </div>
  </div>
</div>

<br>

<% content_for :js do %>
  <%= javascript_tag do  %>
      $('.slider-for').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        fade: true,
        asNavFor: '.slider-nav'
       });

      $('.slider-nav').slick({
        slidesToShow: 3,
        slidesToScroll: 1,
        asNavFor: '.slider-for',
        dots: false,
        centerMode: true,
        focusOnSelect: true
      });

      const coord = <%= raw @property_coodinates.to_json %>;

      var handler = Gmaps.build('Google', { markers: { clusterer: undefined } });
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(
          [
            {
              "lat": coord.lat,
              "lng": coord.lng
            }, ]
          );
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        handler.getMap().setZoom(13);
        });
  <% end %>
<% end %>

